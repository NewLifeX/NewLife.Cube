# ChangeLog

## v6.9.2026.0201 (2026-02-01)

### 新功能
- 支持多租户，重构角色/部门填充逻辑
- 魔方支持完整的数据权限控制以及多租户数据隔离，由XCode做底层支撑
- [feat] 增加短信邮件配置表，增加验证码记录表和通知记录表，支持多租户多渠道消息通知和验证码发送
- 支持邮箱验证码发送、绑定与重置功能，优化结构
- 支持手机号码登录与验证码验证
- [feat] OAuthConfig增加多租户支持
- 增加魔方用户手册和使用手册

### 改进优化
- 优化头像同步与下载流程，支持Token认证
- 增强SSO头像哈希校验与响应头支持
- 统一Token模型为IToken，提升多租户与认证兼容性
- 重构导航栏，优化多模块与移动端体验
- 导航栏模块菜单响应式优化及租户菜单合并
- 重构验证码服务，支持多渠道多租户短信/邮件
- 多租户架构优化与文档完善，支持多端接入
- 重构 GetRawUrl 返回类型为 UriInfo 并增强兼容性
- 地区数据初始化优化，提升性能与灵活性
- 删除TokenInfo替换为NewLife.Web.TokenModel
- 更新NewLife.Core核心库，TokenModel包含Scope
- 简单包装服务层返回
- 优化百分比字段显示精度与缩放逻辑
- 修正表单横向布局被-15px整体左移的问题
- 表单标签与描述超长时支持省略号显示
- 设置文件哈希相关响应头
- 遇到异常Host请求时，直接在异常里告知原始请求Url
- 验证号码有效只需要缓存，不需要读配置
- 手机验证码部分缓存前缀设为常量
- 建立cube版协作指令

### Bug修复
- 检测并修正异常的LastTime（如果在将来超过5秒，则认为是异常数据，重置为当前时间）
- 配置删除密钥

### 依赖更新
- 升级XCode到最新版本
- 升级NewLife.Core核心库到11.11.2026.201

---

## v6.8.2026.0102 (2026-01-02)

- 支持分布式文件存储
