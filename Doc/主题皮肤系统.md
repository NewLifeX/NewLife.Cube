# 第20章 主题皮肤系统

> 本章介绍魔方的主题皮肤系统，支持多种 UI 主题切换。
> 
> 详细教程：https://newlifex.com/cube/skin

---

## 20.1 内置主题皮肤

魔方提供多种主题皮肤：

| 主题 | NuGet 包 | 特点 |
|------|---------|------|
| AdminLTE | NewLife.Cube.AdminLTE | 经典管理后台主题 |
| Tabler | NewLife.Cube.Tabler | 现代简洁风格 |
| Metronic | NewLife.Cube.Metronic | 企业级主题 |
| Metronic8 | NewLife.Cube.Metronic8 | Metronic 最新版 |
| LayuiAdmin | NewLife.Cube.LayuiAdmin | Layui 风格 |
| ElementUI | NewLife.Cube.ElementUI | ElementUI 风格 |

---

## 20.2 主题切换

### 安装主题包

```bash
# 安装 AdminLTE 主题
dotnet add package NewLife.Cube.AdminLTE

# 安装 Tabler 主题
dotnet add package NewLife.Cube.Tabler
```

### 配置主题

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddCube();
    
    // 使用 AdminLTE 主题
    services.AddAdminLTE();
    
    // 或使用 Tabler 主题
    // services.AddTabler();
}
```

### 运行时切换主题

```json
// appsettings.json
{
  "Cube": {
    "Skin": "AdminLTE"  // 或 "Tabler"、"Metronic" 等
  }
}
```

---

## 20.3 AdminLTE 主题

### 特点

- 基于 Bootstrap 3/4
- 丰富的组件和小部件
- 响应式布局
- 多种配色方案

### 配置选项

```csharp
services.AddAdminLTE(options =>
{
    options.Skin = "skin-blue";  // 皮肤颜色
    options.SidebarMini = true;   // 迷你侧边栏
    options.FixedLayout = true;   // 固定布局
});
```

---

## 20.4 Tabler 主题

### 特点

- 基于 Bootstrap 5
- 现代简洁设计
- 丰富的图表组件
- 深色模式支持

### 配置选项

```csharp
services.AddTabler(options =>
{
    options.DarkMode = false;     // 深色模式
    options.NavbarVariant = "dark"; // 导航栏样式
});
```

---

## 20.5 自定义主题

### 创建自定义主题

1. 创建主题项目
2. 实现 `ICubeSkin` 接口
3. 提供嵌入式视图资源

```csharp
public class MySkin : ICubeSkin
{
    public String Name => "MySkin";
    
    public void ConfigureServices(IServiceCollection services)
    {
        // 注册主题服务
    }
    
    public void Configure(IApplicationBuilder app)
    {
        // 配置主题中间件
    }
}
```

### 主题资源结构

```
MySkin/
├── Areas/
│   └── Admin/
│       └── Views/
│           └── Shared/
│               ├── _Layout.cshtml
│               ├── _Left.cshtml
│               └── ...
├── wwwroot/
│   ├── css/
│   ├── js/
│   └── images/
└── MySkinModule.cs
```

---

## 20.6 皮肤配色

### AdminLTE 配色

```css
/* 可用的皮肤类 */
.skin-blue      /* 蓝色 */
.skin-blue-light
.skin-yellow    /* 黄色 */
.skin-yellow-light
.skin-green     /* 绿色 */
.skin-green-light
.skin-purple    /* 紫色 */
.skin-purple-light
.skin-red       /* 红色 */
.skin-red-light
.skin-black     /* 黑色 */
.skin-black-light
```

### 用户自选皮肤

```csharp
// 保存用户皮肤偏好
public ActionResult SetSkin(String skin)
{
    var user = ManageProvider.User as User;
    user.Skin = skin;
    user.Update();
    
    return JsonRefresh("皮肤设置成功");
}
```

---

## 本章小结

通过本章学习，你应该掌握了：

1. **内置主题**：AdminLTE、Tabler 等主题
2. **主题切换**：安装和配置主题
3. **自定义主题**：创建自己的主题
4. **皮肤配色**：更换颜色方案

---

## 参考资源

- [魔方主题皮肤](https://newlifex.com/cube/skin)
